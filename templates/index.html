<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html lang="en">
<head>
    <title>Visualize your Git!</title>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <link href="//netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css" rel="stylesheet">
    <style>
        #history {
            height: 400px;
        }
        svg {
            width: 100%;
        }
    </style>
</head>
<body>
  <div class="navbar navbar-default" role="navigation">
    <div class="navbar-header">
      <a class="navbar-brand" href="#">Git workflow visualization</a>
    </div>
    <ul class="nav navbar-nav navbar-right">
  
      <li><a href="http://jvns.ca">By Julia Evans</a></li>
      <li><a href="http://twitter.com/b0rk"><img src="https://g.twimg.com/Twitter_logo_blue.png" width="20px"></a></li>
      <li><a href="http://github.com/jvns"><img src="/static/images/GitHub-Mark-32px.png" width="20px"></a></li>
    </ul>
  </div>

  <div class="container">
    <div class="col-md-12">
    Run the following command and paste the results into the textarea to get a visualization of your git workflow!
    <pre> history | grep "  git " | awk '{print $1 " " $3}' | grep -v '|' > history.txt </pre>
    </div>
  </div>
  <div class="container">
    <div class="col-md-3">
      <h3>
        Your history
      </h3>
      <form id="historyform">
        <textarea name="history" id="history" class="form-control" rows="20"></textarea>
        <button type="submit" class="btn btn-primary">Submit</button>
      </form>
    </div>
    <div class="col-md-9">
      <h3 align="center">
        How you use Git
      </h3>
      <div id="image"> </div>
    </div>
  </div>
</body>
<script>
$('document').ready(function() {
    $('#historyform').on('submit', function(event) {
        var history = $('#history')[0].value;
        var post_data = {'history': history};
        console.log(post_data);
        $.post("/graph", post_data, function(response) {
            var svg = response["graph"];
            $('#image').html(svg);
        })
        event.preventDefault();
    });
});
</script>
</html>
